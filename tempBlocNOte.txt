tempBlocNOte

    @PutMapping("")
    public ResponseEntity<List<Player>> createOrUpdatePlayers(@RequestBody List<Player> players){
        try {
            List<Player> updatedOrCreatedPlayers = service.createOrUpdatePlayers(players);
            return new  ResponseEntity<>(updatedOrCreatedPlayers, HttpStatus.OK);
        } catch (Exception e){
            return new ResponseEntity<>(HttpStatus.BAD_REQUEST);
        }
    }



  public Player createPlayer(Player player) throws SQLException {
        String sql = "INSERT INTO players (name, number, position, nationality, age, club_id) VALUES (?, ?, ?, ?, ?, null)";
        try{
            Connection conn = dataSource.getConnection();
            PreparedStatement stmt = conn.prepareStatement(sql);
            stmt.setString(1, player.getName());
            stmt.setInt(2, player.getNumber());
            stmt.setString(3, String.valueOf(player.getPosition()));
            stmt.setString(4, player.getNationality());
            stmt.setInt(5, player.getAge());
            ResultSet rs =  stmt.executeQuery();
            if(rs.next()){
                conn.close();
                return playerRowMapper.map(rs);
            }

        } catch (Exception e){
            throw e;
        }
        return null;
    }

    public Player updatePlayer(Player player) throws SQLException {
        String sql = "UPATE players SET name = ? , number = ? , position = ?, age = ? WHERE id = ?";
        try{
            Connection conn = dataSource.getConnection();
            PreparedStatement stmt = conn.prepareStatement(sql);
            stmt.setString(1, player.getName());
            stmt.setInt(2, player.getNumber());
            stmt.setString(3, String.valueOf(player.getPosition()));
            stmt.setInt(4, player.getAge());
            stmt.setString(5, player.getId());
            ResultSet rs =  stmt.executeQuery();

            if(rs.next()){
                conn.close();
                return playerRowMapper.map(rs);
            }
        } catch (Exception e){
            throw e;
        }
        return null;
    }



    public List<Player> createOrUpdatePlayers(List<Player> players) throws SQLException {
        System.out.println("andhea");
        for(Player player : players){
            System.out.println("mety aloha iy eto");
            Player playerBeforeUpdate = repo.getPlayerById(player.getId());
            System.out.println(playerBeforeUpdate);
            if(playerBeforeUpdate == null){
                repo.createPlayer(player);
                System.out.println("Creation");
            } else {
                System.out.println("Updating");
                repo.updatePlayer(player);
            }
        }
        return players;
    }